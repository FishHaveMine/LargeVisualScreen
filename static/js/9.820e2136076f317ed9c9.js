webpackJsonp([9],{"4ILP":function(e,o,n){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var t=n("nvbp"),i=n.n(t),r=n("BO1k"),a=n.n(r),s=n("mvHQ"),d=n.n(s),h=n("//Fk"),c=n.n(h),l=n("+N0L"),m=n("6lvc"),u=n.n(m),Y=n("8GP8"),f=n.n(Y),p={name:"tuopu",data:function(){return{backgroundImage:u.a,nodeBG:f.a,container:Math.random().toString(36).substr(2),baseNode:null,onErrorNode:[],onErrorLine:[]}},mixins:[n("HQei").a],mounted:function(){this.myChart=this.$echarts.init(document.getElementById(this.container+""));var e="东莞"===this.showType?"/wukangscreen/daCentreTopFengGTopoWebSocket/admin":"上海"===this.showType?"/wukangscreen/daCentreTopJingQTopoWebSocket/admin":"/wukangscreen/daCentreTopHouHTopoWebSocket/admin";this.baseNode=Object(l.a)(this.showType)||{},this.initChart(),this.wsuri="ws://"+window.BaseHost.host+e},computed:{showType:function(){return this.$route.params.type?this.$route.params.type:"东莞"}},methods:{useTheTestDate:function(){},getWebsocketMsg:function(e){var o=this;return e.length>0&&(e.forEach(function(e){if("device"===e.belong){if(1!==e.state||o.onErrorNode.includes(e.name)||o.onErrorNode.push(e.name),0===e.state&&o.onErrorNode.includes(e.name)){var n=o.onErrorNode.indexOf(e.name);o.onErrorNode.splice(n,1)}}else{var t=o.onErrorLine.findIndex(function(o){return o.from===e.from&&o.to===e.to});1===e.state&&-1===t&&o.onErrorLine.push(e),0===e.state&&-1!==t&&o.onErrorLine.splice(t,1)}}),this.initChart()),new c.a(function(e,o){e()})},commitTheStatus:function(){var e={index:2,status:0===this.onErrorLine.length&&0===this.onErrorNode.length?0:1};this.$emit("ErrorRouter",e)},getIcon:function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.baseNode.tyepDefault[e]+(0===o?"_Blue":"_Red");return this.baseNode.icon[n]},initChart:function(){var e=this,o={nodes:[],normalLine:[],errorLine:[]},n=void 0!==this.baseNode.nodeInfo?JSON.parse(d()(this.baseNode.nodeInfo)):[],t=void 0!==this.baseNode.lineInfo?JSON.parse(d()(this.baseNode.lineInfo)):[];n&&n.length>0&&n.forEach(function(n){var t=n.x,i=n.y,r=n.name,a=n.type,s=n.showLable,d=n.position,h=n.nodetype;if("node"===h){var c={show:s,position:d,backgroundColor:"transparent",formatter:function(e){return"{x|"+e.data.name+"}"},rich:{x:{height:25,width:80,align:"center",color:"#f3f8ff",fontSize:28,padding:[5,10]}}},l={name:r,value:[t,i],symbolSize:"机房"!==a?80:[80,120],symbol:"image://"+e.getIcon(a,e.onErrorNode.includes(r)?1:0),itemStyle:{color:"orange",opacity:1,backgroundColor:"transparent"},label:c};o.nodes.push(l)}if("group"===h){var m=n.width,u={show:!0,position:[m/2-40,8],backgroundColor:"transparent",formatter:function(e){return"{x|"+e.data.name+"}"},rich:{x:{height:25,width:80,opacity:1,align:"center",color:"#b0f6fe",fontSize:28,padding:[5,10]}}},Y={name:r,value:[t,i],symbolSize:[m,n.height],symbol:"image://"+e.nodeBG,itemStyle:{color:"#3a4ead",opacity:1,backgroundColor:"#3a4ead"},label:u};o.nodes.push(Y)}}),t&&t.length>0&&t.forEach(function(n){var t=n.from,i=n.to,r=n.coords,s=!1,d=!0,h=!1,c=void 0;try{for(var l,m=a()(e.onErrorLine);!(d=(l=m.next()).done);d=!0){var u=l.value;if(u.from===t&&u.to===i){s=!0;break}}}catch(e){h=!0,c=e}finally{try{!d&&m.return&&m.return()}finally{if(h)throw c}}s?o.errorLine.push(r):o.normalLine.push(r)});var i={grid:{top:"2%",left:"5%",right:"0%",bottom:"5%"},backgroundColor:"transparent",xAxis:{min:0,max:1105,show:!1,type:"value"},yAxis:{min:0,max:1e3,show:!1,type:"value"},series:[{type:"graph",coordinateSystem:"cartesian2d",edgeSymbol:["circle","arrow"],edgeSymbolSize:[4,10],edgeLabel:{normal:{textStyle:{color:"#b0f6fe",fontSize:18}}},lineStyle:{width:2,opacity:1,color:"#b0f6fe"},data:o.nodes},{type:"lines",polyline:!0,coordinateSystem:"cartesian2d",lineStyle:{width:5,color:"#b0f6fe",curveness:.3},data:o.normalLine},{type:"lines",polyline:!0,coordinateSystem:"cartesian2d",lineStyle:{width:3,color:"red",curveness:.3},effect:{show:!0,trailLength:0,symbol:"circle",color:"red",symbolSize:8},data:o.errorLine}]};this.myChart.setOption(i,!0)}},render:function(e){return e("section",i()([{class:"mainBox"},{style:{backgroundImage:" url("+this.backgroundImage+")"}}]),[e("section",{class:"mapTitle"},["东莞"===this.showType?"东莞凤岗网络拓扑图":"深圳"===this.showType?"深圳后海机房网络拓扑图":"上海金桥机房网络拓扑图"]),e("section",{class:"mapPoint",attrs:{id:this.container}})])}};var T=n("VU/8")(p,null,!1,function(e){n("fuIU")},"data-v-fbd35346",null);o.default=T.exports},"8GP8":function(e,o){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAAC0CAYAAAA9zQYyAAAB/UlEQVR4nO3SQQ3AIADAwDFZiOCFTTzOxBKS5k5BHx1znf1AxHs7AP5kaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTcoH7XsC8YgktsAAAAAASUVORK5CYII="},fuIU:function(e,o){}});
//# sourceMappingURL=9.820e2136076f317ed9c9.js.map