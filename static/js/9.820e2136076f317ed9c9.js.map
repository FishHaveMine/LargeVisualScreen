{"version":3,"sources":["webpack:///src/view/DailyOperation/center/children/tuopu.vue","webpack:///./src/view/DailyOperation/center/children/tuopu.vue","webpack:///./src/assets/DailyOperation/networktuopu/v1_bg.png"],"names":["tuopu","name","data","backgroundImage","__1_2_default","a","nodeBG","v1_bg_default","container","Math","random","toString","substr","baseNode","onErrorNode","onErrorLine","mixins","mounted","this","myChart","$echarts","init","document","getElementById","type","showType","Object","dailyOperationDate","initChart","wsuri","window","BaseHost","host","computed","$route","params","methods","useTheTestDate","getWebsocketMsg","sourDate","_this","length","forEach","element","belong","state","includes","push","target","indexOf","splice","_target","findIndex","item","from","to","promise_default","resolve","reject","commitTheStatus","Router","index","status","$emit","getIcon","arguments","undefined","iconName","tyepDefault","icon","_this2","charts","nodes","normalLine","errorLine","nodeInfo","JSON","parse","stringify_default","lines","lineInfo","x","y","showLable","position","nodetype","frameLabel","show","backgroundColor","formatter","rich","height","width","align","color","fontSize","padding","node","value","symbolSize","symbol","itemStyle","opacity","label","_frameLabel","_node","coords","isError","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","get_iterator_default","next","done","err","return","option","grid","top","left","right","bottom","xAxis","min","max","yAxis","series","coordinateSystem","edgeSymbol","edgeSymbolSize","edgeLabel","normal","textStyle","lineStyle","polyline","curveness","effect","trailLength","setOption","render","h","babel_helper_vue_jsx_merge_props_default","class","style","attrs","id","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","module","exports"],"mappings":"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","file":"static/js/9.820e2136076f317ed9c9.js","sourcesContent":["<script>\n// eslint-disable-next-line no-unused-vars\nimport getTuoPuNode from \"../../../../../static/dailyOperationDate\";\nimport backgroundImage from \"@/assets/DailyOperation/background/2-1-2.jpg\";\nimport nodeBG from \"@/assets/DailyOperation/networktuopu/v1_bg.png\";\n\nimport websockObject from \"@/mixins/websock\";\nconst backgroundColor = \"transparent\";\nconst nodeFontSize = 28;\nconst symbolSize = 80;\n\nexport default {\n  name: \"tuopu\",\n  data() {\n    return {\n      backgroundImage,\n      nodeBG,\n      container: Math.random()\n        .toString(36)\n        .substr(2),\n      baseNode: null,\n      onErrorNode: [],\n      onErrorLine: []\n    };\n  },\n  mixins: [websockObject],\n  mounted() {\n    this.myChart = this.$echarts.init(\n      document.getElementById(this.container + \"\")\n    );\n    // eslint-disable-next-line no-undef\n    // this.wsuri = BaseUrl.dailyCenterMain.TuoPuWebsockUrl + this.showType\n    let type =\n      this.showType === \"东莞\"\n        ? \"/wukangscreen/daCentreTopFengGTopoWebSocket/admin\"\n        : this.showType === \"上海\"\n        ? \"/wukangscreen/daCentreTopJingQTopoWebSocket/admin\"\n        : \"/wukangscreen/daCentreTopHouHTopoWebSocket/admin\";\n    this.baseNode = getTuoPuNode(this.showType) || {};\n    this.initChart();\n    // eslint-disable-next-line no-undef\n    this.wsuri = \"ws://\" + window.BaseHost.host + type;\n  },\n  computed: {\n    showType() {\n      return this.$route.params.type ? this.$route.params.type : \"东莞\";\n    }\n  },\n  methods: {\n    useTheTestDate() {},\n    getWebsocketMsg(sourDate) {\n      if (sourDate.length > 0) {\n        sourDate.forEach(element => {\n          if (element.belong === \"device\") {\n            if (\n              element.state === 1 &&\n              !this.onErrorNode.includes(element.name)\n            ) {\n              this.onErrorNode.push(element.name);\n            }\n            if (\n              element.state === 0 &&\n              this.onErrorNode.includes(element.name)\n            ) {\n              let target = this.onErrorNode.indexOf(element.name);\n              this.onErrorNode.splice(target, 1);\n            }\n          } else {\n            let target = this.onErrorLine.findIndex(item => {\n              return item.from === element.from && item.to === element.to;\n            });\n            if (element.state === 1 && target === -1) {\n              this.onErrorLine.push(element);\n            }\n            if (element.state === 0 && target !== -1) {\n              this.onErrorLine.splice(target, 1);\n            }\n          }\n        });\n        this.initChart();\n      }\n      return new Promise(function(resolve, reject) {\n        resolve();\n      });\n    },\n    commitTheStatus() {\n      let Router = {\n        index: 2,\n        status:\n          this.onErrorLine.length === 0 && this.onErrorNode.length === 0 ? 0 : 1\n      };\n      this.$emit(\"ErrorRouter\", Router);\n    },\n    getIcon(type, status = 0) {\n      let iconImage = \"\";\n      let iconName =\n        this.baseNode.tyepDefault[type] + (status === 0 ? \"_Blue\" : \"_Red\");\n      iconImage = this.baseNode.icon[iconName];\n      return iconImage;\n    },\n    initChart() {\n      // this.commitTheStatus()\n      let charts = {\n        nodes: [],\n        normalLine: [],\n        errorLine: []\n      };\n      let nodes =\n        this.baseNode.nodeInfo !== undefined\n          ? JSON.parse(JSON.stringify(this.baseNode.nodeInfo))\n          : [];\n      let lines =\n        this.baseNode.lineInfo !== undefined\n          ? JSON.parse(JSON.stringify(this.baseNode.lineInfo))\n          : [];\n      if (nodes && nodes.length > 0) {\n        nodes.forEach(element => {\n          const { x, y, name, type, showLable, position, nodetype } = element;\n          if (nodetype === \"node\") {\n            let frameLabel = {\n              show: showLable,\n              position: position,\n              backgroundColor: backgroundColor,\n              formatter: function(item) {\n                let val = item.data.name;\n                return `{x|${val}}`;\n              },\n              rich: {\n                x: {\n                  height: 25,\n                  width: 80,\n                  align: \"center\",\n                  color: \"#f3f8ff\",\n                  fontSize: nodeFontSize,\n                  padding: [5, 10]\n                }\n              }\n            };\n            let node = {\n              name: name,\n              value: [x, y],\n              symbolSize: type !== \"机房\" ? symbolSize : [80, 120],\n              symbol:\n                \"image://\" +\n                this.getIcon(type, this.onErrorNode.includes(name) ? 1 : 0),\n              itemStyle: {\n                color: \"orange\",\n                opacity: 1,\n                backgroundColor: backgroundColor\n              },\n              label: frameLabel\n            };\n            charts.nodes.push(node);\n          }\n          if (nodetype === \"group\") {\n            const { width, height } = element;\n            let frameLabel = {\n              show: true,\n              position: [width / 2 - 40, 8],\n              backgroundColor: backgroundColor,\n              formatter: function(item) {\n                let val = item.data.name;\n                return `{x|${val}}`;\n              },\n              rich: {\n                x: {\n                  height: 25,\n                  width: 80,\n                  opacity: 1,\n                  align: \"center\",\n                  color: \"#b0f6fe\",\n                  fontSize: nodeFontSize,\n                  padding: [5, 10]\n                }\n              }\n            };\n            let node = {\n              name: name,\n              value: [x, y],\n              symbolSize: [width, height],\n              symbol: \"image://\" + this.nodeBG,\n              itemStyle: {\n                color: \"#3a4ead\",\n                opacity: 1,\n                backgroundColor: \"#3a4ead\"\n              },\n              label: frameLabel\n            };\n            charts.nodes.push(node);\n          }\n        });\n      }\n      if (lines && lines.length > 0) {\n        lines.forEach(element => {\n          const { from, to, coords } = element;\n          let isError = false;\n          for (let errorLine of this.onErrorLine) {\n            if (errorLine.from === from && errorLine.to === to) {\n              isError = true;\n              break;\n            }\n          }\n          if (!isError) {\n            charts.normalLine.push(coords);\n          } else {\n            charts.errorLine.push(coords);\n          }\n        });\n      }\n      let option = {\n        grid: {\n          top: \"2%\",\n          left: \"5%\",\n          right: \"0%\",\n          bottom: \"5%\"\n          // containLabel: true\n        },\n        backgroundColor: backgroundColor,\n        xAxis: {\n          min: 0,\n          max: 1105,\n          show: false,\n          type: \"value\"\n        },\n        yAxis: {\n          min: 0,\n          max: 1000,\n          show: false,\n          type: \"value\"\n        },\n        series: [\n          {\n            type: \"graph\",\n            coordinateSystem: \"cartesian2d\",\n            edgeSymbol: [\"circle\", \"arrow\"],\n            edgeSymbolSize: [4, 10],\n            edgeLabel: {\n              normal: {\n                textStyle: {\n                  color: \"#b0f6fe\",\n                  fontSize: 18\n                }\n              }\n            },\n            lineStyle: {\n              width: 2,\n              opacity: 1,\n              color: \"#b0f6fe\"\n            },\n            data: charts.nodes\n          },\n          {\n            type: \"lines\",\n            polyline: true,\n            coordinateSystem: \"cartesian2d\",\n            lineStyle: {\n              width: 5,\n              color: \"#b0f6fe\",\n              curveness: 0.3\n            },\n            data: charts.normalLine\n          },\n          {\n            type: \"lines\",\n            polyline: true,\n            coordinateSystem: \"cartesian2d\",\n            lineStyle: {\n              width: 3,\n              color: \"red\",\n              curveness: 0.3\n            },\n            effect: {\n              show: true,\n              trailLength: 0,\n              symbol: \"circle\",\n              color: \"red\",\n              symbolSize: 8\n            },\n            data: charts.errorLine\n          }\n        ]\n      };\n      this.myChart.setOption(option, true);\n    }\n  },\n  render(h) {\n    return (\n      <section\n        class=\"mainBox\"\n        {...{\n          style: { backgroundImage: \" url(\" + this.backgroundImage + \")\" }\n        }}\n      >\n        <section class=\"mapTitle\">\n          {this.showType === \"东莞\"\n            ? \"东莞凤岗网络拓扑图\"\n            : this.showType === \"深圳\"\n            ? \"深圳后海机房网络拓扑图\"\n            : \"上海金桥机房网络拓扑图\"}\n        </section>\n        <section class=\"mapPoint\" id={this.container}></section>\n      </section>\n    );\n  }\n};\n</script>\n\n<style scoped>\n.mapTitle {\n  position: absolute;\n  top: 630px;\n  left: 150px;\n  width: 52px;\n  word-wrap: break-word;\n  font-size: 96px;\n  font-weight: normal;\n  font-stretch: normal;\n  line-height: 106px;\n  letter-spacing: 0px;\n  color: #96d1ff;\n}\n.mainBox {\n  width: 5760px;\n  height: 2160px;\n  position: relative;\n}\n.mapPoint {\n  position: absolute;\n  width: 4540px;\n  height: 1800px;\n  top: 330px;\n  left: 320px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/view/DailyOperation/center/children/tuopu.vue","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-fbd35346\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./tuopu.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./tuopu.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./tuopu.vue\"\n/* template */\nvar __vue_template__ = null\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-fbd35346\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/DailyOperation/center/children/tuopu.vue\n// module id = null\n// module chunks = ","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAAC0CAYAAAA9zQYyAAAB/UlEQVR4nO3SQQ3AIADAwDFZiOCFTTzOxBKS5k5BHx1znf1AxHs7AP5kaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTYqhSTE0KYYmxdCkGJoUQ5NiaFIMTcoH7XsC8YgktsAAAAAASUVORK5CYII=\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/DailyOperation/networktuopu/v1_bg.png\n// module id = 8GP8\n// module chunks = 9"],"sourceRoot":""}